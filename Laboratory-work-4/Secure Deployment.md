### Безпечне розгортання
## Огляд практики безпеки
Одним із останніх етапів доставки захищеного програмного забезпечення є забезпечення безпеки та цілісності розроблених програм, які не порушуються під час розгортання. Практика безпечного розгортання (SD) фокусується на цьому. З цією метою перший потік практики зосереджений на усуненні ручних помилок шляхом максимальної автоматизації процесу розгортання та встановлення його успіху в залежності від результатів інтегрованої перевірки безпеки. Він також сприяє розподілу обов’язків, покладаючи на відповідальних за розгортання осіб, які не є розробниками.
Другий потік виходить за рамки механізму розгортання та зосереджується на захисті конфіденційності та цілісності конфіденційних даних, таких як паролі, маркери та інші секрети, необхідні для роботи програм у робочих середовищах. У своїй найпростішій формі відповідні виробничі секрети переміщуються зі сховищ і конфігураційних файлів у належним чином керовані цифрові сховища. У більш просунутих формах секрети динамічно генеруються під час розгортання, а рутинні процеси виявляють і пом’якшують присутність будь-яких незахищених секретів у середовищі.

## Огляд потоків
# Потік А - Процес розгортання
Повторюваний і послідовний процес розгортання гарантує, що ви тільки розгортаєте виправити артефакти програмного забезпечення для виробництва. Це також прокладає шлях для репрезентативні тестові середовища перед виробництвом.

# Потік B - Секретне управління
Оскільки для безпечного виконання будь-якої програмної системи потрібні облікові дані, це stream забезпечує належну обробку цих конфіденційних елементів даних у середовище організації.

## Огляд діяльності
| Потік A Процес розгортання | Потік B Секретне керування |

|                                                        Рівень зрілості 1 Процеси розгортання повністю задокументовані.                                                        |
|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
| Формалізуйте процес розгортання та захистіть використовувані інструменти та процеси. | Запровадити основні заходи захисту для обмеження доступ до ваших секретів виробництва. |

|                                                        Рівень зрілості 2 Процеси розгортання включають віхи перевірки безпеки.                                                                                 |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
| Автоматизуйте весь процес розгортання етапів і запроваджуйте розумну безпеку перевірочні тести. | Динамічно вводити секрети під час розгортання процес із загартованих сховищ і ревіз весь доступ людини до них. |

|                                                        Рівень зрілості 3 Процес розгортання повністю автоматизований і включає автоматичну перевірку всіх критичних етапів.                                    |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
| Автоматично перевіряйте цілісність усього розгорнутого програмного забезпечення, незалежно від того, розроблено воно внутрішньо чи зовнішньо. | Покращуйте життєвий цикл секретів програми, регулярно створюючи їх і забезпечуючи належне використання. |

## Потік A – Процес розгортання
Рівень зрілості 1

# Користь
Обмежений ризик людської помилки під час процесу розгортання, мінімізуючи проблеми безпеки.

# Діяльність
Визначте процес розгортання на всіх етапах, розбивши його на набір чітких інструкцій, які повинні виконуватися людиною або автоматизованим інструментом.
Визначення процесу розгортання має описувати весь процес від кінця до кінця, щоб його можна було послідовно виконувати кожного разу для отримання того самого результату. Визначення зберігається централізовано та доступне для всього відповідного персоналу. Не зберігайте та не поширюйте кілька копій, деякі з яких можуть застаріти.
Розгортайте додатки у виробництві або за допомогою автоматизованого процесу, або вручну персоналом, окрім розробників. Переконайтеся, що розробникам не потрібен прямий доступ до виробничого середовища для розгортання програми.

# Діяльність (продовження)
Перегляньте будь-які інструменти розгортання, переконавшись, що вони активно підтримуються постачальниками та оновлюються за допомогою виправлень безпеки. Зміцніть конфігурацію кожного інструменту, щоб вона відповідала інструкціям постачальника та найкращим галузевим практикам. З огляду на те, що більшість із цих інструментів потребують доступу до виробничого середовища, їхня безпека є надзвичайно важливою. Забезпечте цілісність самих інструментів і робочих процесів, яким вони дотримуються, і налаштуйте правила доступу до цих інструментів відповідно до принципу найменших привілеїв.
Нехай персонал, який має доступ до виробничого середовища, пройшов принаймні мінімальний рівень навчання або сертифікації, щоб переконатися в його компетентності в цьому питанні.

| Чи використовуєте ви повторювані процеси розгортання? |

|                                    Критерії якості                                    |
|:-------------------------------------------------------------------------------------:|
|- У вас достатньо інформації для запуску процесів розгортання                          |
|- Ваша документація щодо розгортання актуальна                                         |
|- Ваша документація щодо розгортання доступна відповідним зацікавленим сторонам        |
|- Ви гарантуєте, що лише визначений кваліфікований персонал може ініціювати розгортання|
|- Ви посилюєте інструменти, які використовуються в процесі розгортання                 |

|                 Відповіді                |
|:----------------------------------------:|
|Ні                                        |
|Так, для деяких програм                   |
|Так, не менше половини заявок             |
|Так, для більшості або всіх програм       |

## Потік A – Процес розгортання
Рівень зрілості 2

# Користь
Ефективний процес розгортання з інтегрованими засобами безпеки.

# Діяльність
Автоматизуйте процес розгортання, щоб охопити різні етапи, щоб не було необхідності виконувати кроки конфігурації вручну та усунути ризик ізольованих людських помилок. Переконайтеся, що розгортання узгоджено на всіх етапах.
Інтегруйте автоматичні перевірки безпеки в процес розгортання, напр. використовуючи тестування безпеки динамічного аналізу (DAST) і інструменти сканування вразливостей. Також перевірте цілісність розгорнутих артефактів, де це має сенс. Реєструйте результати цих тестів централізовано та виконуйте всі необхідні дії. Переконайтеся, що у разі виявлення будь-яких дефектів відповідний персонал буде повідомлено автоматично. У разі виявлення будь-яких проблем, що перевищують заздалегідь визначену критичність, призупиніть або скасуйте розгортання автоматично або запровадьте окремий робочий процес затвердження вручну, щоб це рішення було записано з поясненням винятку.
Облік і аудит усіх розгортань на всіх етапах. Майте систему для реєстрації кожного розгортання, включаючи інформацію про те, хто його проводив, версію програмного забезпечення, яке було розгорнуто, і будь-які відповідні змінні, характерні для розгортання.

|Чи автоматизовані процеси розгортання та чи використовуються перевірки безпеки?|

|                                    Критерії якості                             |
|:------------------------------------------------------------------------------:|
|- Процеси розгортання автоматизовані на всіх етапах                             |
|- Розгортання включає процедури автоматичного тестування безпеки                |
|- Ви попереджаєте відповідальний персонал про виявлені вразливі місця           |
|- У вас є доступні журнали для ваших попередніх розгортань за певний період часу|

|                 Відповіді                |
|:----------------------------------------:|
|Ні                                        |
|Так, для деяких програм                   |
|Так, принаймні на половину заявок         |
|Так, для більшості або всіх програм       |

## Потік A – Процес розгортання
Рівень зрілості 3

# Користь
Гарантована цілісність артефактів, які розгортаються у виробництві.

# Діяльність
Скористайтеся перевагами підпису двійкових файлів під час збірки та включіть автоматичну перевірку цілісності програмного забезпечення, яке розгортається, перевіряючи їхні підписи за довіреними сертифікатами. Це може включати двійкові файли, розроблені та створені власними силами, а також сторонні артефакти. Не розгортайте артефакти, якщо їх підписи неможливо перевірити, включно з недійсними або простроченими сертифікатами.
Якщо список довірених сертифікатів включає сторонніх розробників, періодично перевіряйте їх і тримайте їх у відповідності до ширшого керівництва організації щодо довірених сторонніх постачальників.
Вручну підтвердьте розгортання принаймні один раз під час автоматичного розгортання. Якщо під час процесу розгортання перевірка людиною значно точніша за автоматизовану, вибирайте цей варіант.

|Чи постійно ви перевіряєте цілісність розгорнутих артефактів?|

|                                                                   Критерії якості                                                         |
|:-----------------------------------------------------------------------------------------------------------------------------------------:|
|- Ви запобігаєте або скасовуєте розгортання, якщо виявляєте порушення цілісності                                                           |
|- Перевірка виконується за підписами, створеними під час збирання                                                                          |
|- Якщо перевірка підписів неможлива (наприклад, зовнішня збірка програмного забезпечення), ви запроваджуєте компенсаційні заходи           |


|                 Відповіді                |
|:----------------------------------------:|
|Ні                                        |
|Так, для деяких програм                   |
|Так, принаймні на половину заявок         |
|Так, для більшості або всіх програм       |

## Потік Б - Секретне управління
Рівень зрілості 1

# Користь
Визначений і обмежений доступ до ваших секретів виробництва.

# Діяльність
Розробники не повинні мати доступу до секретів або облікових даних для робочих середовищ. Майте механізм для належного захисту виробничих секретів, наприклад, (i) за допомогою спеціальних осіб, які додають їх до відповідних конфігураційних файлів після розгортання (принцип поділу обов’язків) або (ii) шляхом попереднього шифрування виробничих секретів, що містяться у файлах конфігурації. .
Не використовуйте виробничі секрети у файлах конфігурації для середовищ розробки чи тестування, оскільки такі середовища можуть мати значно нижчий рівень безпеки. Так само не зберігайте секрети незахищеними у файлах конфігурації, що зберігаються в сховищах коду.
Постійно зберігайте конфіденційні облікові дані та секрети для робочих систем із шифруванням у стані спокою. Розгляньте можливість використання для цього спеціального інструменту. Керуйте ключами обережно, щоб лише персонал, відповідальний за розгортання виробництва, мав доступ до цих даних.

|Чи обмежуєте ви доступ до секретів програми за принципом найменших привілеїв?|

|                                                                   Критерії якості                                                         |
|:-----------------------------------------------------------------------------------------------------------------------------------------:|
|- Ви зберігаєте виробничі секрети в захищеному місці                                                           |
|- Розробники не мають доступу до секретів виробництва                                                                          |
|- Секрети виробництва недоступні в невиробничих середовищах           |

|                 Відповіді                |
|:----------------------------------------:|
|Ні                                        |
|Так, для деяких програм                   |
|Так, принаймні на половину заявок         |
|Так, для більшості або всіх програм       |

## Потік Б - Секретне управління
Рівень зрілості 2

# Користь
Виявлення можливого витоку секретів виробництва.

# Діяльність
Майте автоматизований процес додавання облікових даних і секретів до файлів конфігурації під час процесу розгортання на відповідних етапах. Таким чином розробники та розгортачі не бачать і не обробляють ці конфіденційні значення.
Реалізуйте перевірки, які виявляють наявність секретів у сховищах коду та файлах, і запускайте їх періодично. Налаштуйте інструменти для пошуку відомих рядків і невідомих рядків з високою ентропією. У таких системах, як сховища коду, де є історія, включіть версії в перевірки. Позначте потенційні секрети, які ви виявите, як конфіденційні цінності та видаліть їх, де це необхідно. Якщо ви не можете видалити їх із файлу історії в сховищі коду, наприклад, вам може знадобитися оновити значення в системі, яка споживає секрет. Таким чином, якщо зловмисник дізнається секрет, він не буде йому корисний.
Зробіть систему, яка використовується для зберігання та обробки секретів і облікових даних, надійною з точки зору безпеки. Шифруйте всі секрети під час спокою та під час передачі. Користувачі, які налаштовують цю систему та секрети, які вона містить, підпадають під дію принципу найменших привілеїв. Наприклад, розробнику може знадобитися керувати секретами для середовища розробки, але не для перевірки прийнятності користувачем або робочого середовища.

|Чи додаєте ви виробничі секрети у файли конфігурації під час розгортання?|

|                                                                   Критерії якості                                                         |
|:-----------------------------------------------------------------------------------------------------------------------------------------:|
|- Файли вихідного коду більше не містять активних секретів програми                                                           |
|- За звичайних обставин ніхто не має доступу до секретів під час процедур розгортання                                                                          |
|- Ви входите в систему та сповіщаєте про спробу ненормального доступу до секретів           |

|                 Відповіді                |
|:----------------------------------------:|
|Ні                                        |
|Так, для деяких програм                   |
|Так, принаймні на половину заявок         |
|Так, для більшості або всіх програм       |

## Потік Б - Секретне управління
Рівень зрілості 3

# Користь
Зведена до мінімуму можливість і своєчасне виявлення зловживань виробничою таємницею.

# Діяльність
Впроваджуйте керування життєвим циклом для секретів виробництва та забезпечте генерацію нових секретів, наскільки це можливо, і для кожного екземпляра програми. Використання секретів для кожного екземпляра програми гарантує, що несподівана поведінка програми може бути відстежена та належним чином проаналізована. Інструменти можуть допомогти в автоматичному та непомітному оновленні секретів у всіх відповідних місцях після зміни.
Переконайтеся, що всі доступи до секретів (як для читання, так і для запису) реєструються в центральній інфраструктурі. Регулярно переглядайте ці журнали, щоб виявити несподівану поведінку та провести належний аналіз, щоб зрозуміти, чому це сталося. Додайте проблеми та основні причини до практики управління дефектами, щоб переконатися, що організація вирішить будь-які неприйнятні ситуації.

|Чи практикуєте ви належне керування життєвим циклом для секретів програми?|

|                                                                   Критерії якості                                                         |
|:-----------------------------------------------------------------------------------------------------------------------------------------:|
|- Ви створюєте та синхронізуєте секрети за допомогою перевіреного рішення                                                           |
|- Секрети різні для різних екземплярів програми                                                                          |
|- Секрети регулярно оновлюються           |

|                 Відповіді                |
|:----------------------------------------:|
|Ні                                        |
|Так, для деяких програм                   |
|Так, принаймні на половину заявок         |
|Так, для більшості або всіх програм       |





